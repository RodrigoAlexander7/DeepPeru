generator client {
  provider = "prisma-client-js"
}

generator docs {
  provider = "node ./node_modules/prisma-docs-generator"
  output   = "../docs/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// User Table with ext ended personal data
/// - Leagal identity fields are not required when the user is a tourist
model User {
  id                String          @id @default(cuid())
  email             String          @unique
  image             String?
  /// Whether the user is active
  isActive          Boolean         @default(true)
  phoneId           Int?
  /// When the record was created
  createdAt         DateTime        @default(now())
  /// Example: "1990-05-20T00:00:00.000Z"
  dateOfBirth       DateTime?
  /// National ID, Example: DNI, 12345678 in Peru, relies on nationality
  documentNumber    String?
  /// Exameple: John, Alvaro Raúl
  firstName         String?
  gender            Gender?
  /// Example: Doe, Gómez Pérez
  lastName          String?
  /// Reference to Country, also used for document number
  nationalityId     Int?
  passportCountryId Int?
  /// Passport number for international travel
  passportNumber    String?         @unique
  /// When the record was last updated
  updatedAt         DateTime        @updatedAt
  /// The whole name comming from OAuth providers
  name              String
  /// Preferred interface language
  languageId        Int?
  /// Preferred pricing currency
  currencyId        Int?
  /// Emergency contact phone FK
  emergencyPhoneId  Int?
  accounts          Account[]
  companyAdmin      CompanyAdmin?
  CompanyWorker     CompanyWorker[]
  sessions          Session[]
  systemAdmin       SystemAdmin?
  nationality       Country?        @relation("UserNationality", fields: [nationalityId], references: [id])
  passportCountry   Country?        @relation("PassportCountry", fields: [passportCountryId], references: [id])
  phone             Phone?          @relation("UserPhone", fields: [phoneId], references: [id])
  emergencyPhone    Phone?          @relation("UserEmergencyPhone", fields: [emergencyPhoneId], references: [id])
  language          Language?       @relation(fields: [languageId], references: [id])
  currency          Currency?       @relation(fields: [currencyId], references: [id])
  Booking           Booking[]
}

model SystemAdmin {
  id        Int      @id @default(autoincrement())
  userId    String   @unique
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id])
}

model CompanyAdmin {
  id        Int              @id @default(autoincrement())
  userId    String           @unique
  createdAt DateTime         @default(now())
  user      User             @relation(fields: [userId], references: [id])
  company   TourismCompany[]
}

model Phone {
  id             Int     @id
  number         String
  countryId      Int
  country        Country @relation(fields: [countryId], references: [id])
  users          User[]  @relation("UserPhone")
  emergencyUsers User[]  @relation("UserEmergencyPhone")
}

model Account {
  id                String  @id @default(cuid())
  userId            String
  type              String
  provider          String
  providerAccountId String
  refresh_token     String?
  access_token      String?
  expires_at        Int?
  token_type        String?
  scope             String?
  id_token          String?
  session_state     String?
  user              User    @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerAccountId])
}

model Session {
  id           String   @id @default(cuid())
  sessionToken String   @unique
  userId       String
  expires      DateTime
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model VerificationToken {
  identifier String
  token      String   @unique
  expires    DateTime

  @@unique([identifier, token])
}

/// Represents a supported language in the system.
/// Use ISO 639-1 two-letter codes: e.g. "en", "es", "fr".
/// This table allows linking translatable content to specific languages.
model Language {
  id                        Int                         @id @default(autoincrement())
  /// ISO 639-1 code (unique)
  /// Example: "en"
  code                      String                      @unique
  /// Display name for human readability
  /// Example: "English", "Español", "日本語"
  name                      String
  cityTranslations          CityTranslation[]
  countryTranslations       CountryTranslation[]
  PackageLanguage           PackageLanguage[]
  regionTranslations        RegionTranslation[]
  companies                 TourismCompany[]
  companyTranslations       TourismCompanyTranslation[]
  User                      User[]
  TouristPackage            TouristPackage[]
  TouristPackageTranslation TouristPackageTranslation[]
}

/// Represents a tourism company (brand or organization).
/// A company may have multiple physical installations (offices, hotels, etc.)
/// and multilingual information via the related translation table.
model TourismCompany {
  id                 Int                         @id @default(autoincrement())
  /// Commercial name of the company
  name               String
  /// Legal or registered business name (optional)
  legalName          String?
  /// Business registration number: RUC, VAT, RFC, etc.
  registrationNumber String?
  /// Main contact email (required)
  email              String
  /// Main contact phone (required)
  phone              String
  /// Official website
  websiteUrl         String?
  /// Logo URL (optional)
  logoUrl            String?
  /// Official registration date (legal or administrative)
  /// Example: "2025-01-15T00:00:00.000Z"
  registerDate       DateTime
  /// Whether the company is active in the system
  isActive           Boolean                     @default(true)
  /// Average rating from users or agencies
  rating             Float?
  /// Default language for the company (ISO code, e.g., "en", "es")
  languageId         Int?
  /// When the record was created
  createdAt          DateTime                    @default(now())
  /// When the record was last updated
  updatedAt          DateTime                    @updatedAt
  adminId            Int
  installations      CompanyInstallation[]
  CompanyWorker      CompanyWorker[]
  admin              CompanyAdmin                @relation(fields: [adminId], references: [id])
  language           Language?                   @relation(fields: [languageId], references: [id])
  translations       TourismCompanyTranslation[]
  TouristPackage     TouristPackage[]
}

/// Stores translations for tourism companies.
/// Only fields that vary by language are placed here (e.g. description, tagline).
model TourismCompanyTranslation {
  id          Int            @id @default(autoincrement())
  companyId   Int
  languageId  Int
  /// Description of services, history, etc. (localized)
  description String?
  /// Short tagline or slogan (localized)
  tagline     String?
  company     TourismCompany @relation(fields: [companyId], references: [id])
  language    Language       @relation(fields: [languageId], references: [id])

  @@unique([companyId, languageId])
}

/// Represents a physical location (branch, office, hotel, etc.)
/// Each company can have one or more installations.
/// Includes geographic coordinates for use in Google Maps or similar apps.
model CompanyInstallation {
  id           Int            @id @default(autoincrement())
  /// Installation name or label
  /// Example: "Main Office", "Cusco Branch"
  name         String
  /// Address or description of the location
  /// Example: "Av. Arequipa 1200, Miraflores"
  address      String
  /// Latitude coordinate for map location
  /// Example: -16.3989
  latitude     Float
  /// Longitude coordinate for map location
  /// Example: -71.5350
  longitude    Float
  /// Optional relation to a postal code (if structured location is used)
  postalCodeId Int?
  /// Relation to the parent company
  companyId    Int
  /// Whether this location is active
  isActive     Boolean        @default(true)
  /// Record creation timestamp
  createdAt    DateTime       @default(now())
  /// Record last update timestamp
  updatedAt    DateTime       @updatedAt
  company      TourismCompany @relation(fields: [companyId], references: [id])
  postalCode   PostalCode?    @relation(fields: [postalCodeId], references: [id])
}

/// Represents a country.
/// Supports multilingual display names via CountryTranslation.
model Country {
  id                   Int                  @id @default(autoincrement())
  /// ISO 3166-1 alpha-2 code, e.g., "PE"
  code                 String               @unique
  /// Default (fallback) name, e.g., "Peru"
  name                 String               @unique
  /// International phone prefix, e.g., "+51"
  phoneCode            String?
  /// Currency reference
  currencyId           Int?
  currency             Currency?            @relation(fields: [currencyId], references: [id])
  translations         CountryTranslation[]
  phones               Phone[]
  regions              Region[]
  usersNationalities   User[]               @relation("UserNationality")
  usersPassportCountry User[]               @relation("PassportCountry")
}

/// Country name translations, to show country names in different languages
/// Example: "Germany" in English, "Deutschland" in German
model CountryTranslation {
  id         Int      @id @default(autoincrement())
  countryId  Int
  languageId Int
  name       String
  country    Country  @relation(fields: [countryId], references: [id])
  language   Language @relation(fields: [languageId], references: [id])

  @@unique([countryId, languageId])
}

/// Represents a region, state, or department.
/// Supports multilingual names via RegionTranslation.
model Region {
  id           Int                 @id @default(autoincrement())
  name         String
  code         String?
  countryId    Int
  cities       City[]
  country      Country             @relation(fields: [countryId], references: [id])
  translations RegionTranslation[]
}

/// Region name translations
/// to show region names in different languages
/// Example: "Tokyo" in English, "東京" in Japanese
model RegionTranslation {
  id         Int      @id @default(autoincrement())
  regionId   Int
  languageId Int
  name       String
  language   Language @relation(fields: [languageId], references: [id])
  region     Region   @relation(fields: [regionId], references: [id])

  @@unique([regionId, languageId])
}

/// Represents a city.
/// Supports multilingual display names via CityTranslation.
model City {
  id                       Int               @id @default(autoincrement())
  name                     String
  regionId                 Int
  region                   Region            @relation(fields: [regionId], references: [id])
  translations             CityTranslation[]
  postalCodes              PostalCode[]
  // Bridge relation to packages (normalized itinerary locations)
  packageLocations         PackageLocation[]
  // Back relation: packages that use this city as representative
  representativeOfPackages TouristPackage[]  @relation("RepresentativeCity")
  // Back relation: activities whose destination is this city
  activitiesDestination    Activity[]
}

/// City name translations
/// for showing city names in different languages
/// Example: "Tokyo" in English, "東京" in Japanese
model CityTranslation {
  id         Int      @id @default(autoincrement())
  cityId     Int
  languageId Int
  name       String
  city       City     @relation(fields: [cityId], references: [id])
  language   Language @relation(fields: [languageId], references: [id])

  @@unique([cityId, languageId])
}

/// Represents postal codes linked to cities.
/// Useful for structuring addresses.
model PostalCode {
  id            Int                   @id @default(autoincrement())
  /// Postal code (e.g., "04001")
  code          String
  /// Relation to the city
  cityId        Int
  installations CompanyInstallation[]
  city          City                  @relation(fields: [cityId], references: [id])
}

/// Represents a currency used by one or more countries.
/// Follows ISO 4217 codes.
model Currency {
  id            Int             @id @default(autoincrement())
  /// Full currency name, e.g., "Peruvian Sol"
  name          String
  /// ISO 4217 code, e.g., "PEN"
  code          String
  /// Symbol used, e.g., "S/"
  symbol        String?
  countries     Country[]
  PricingOption PricingOption[]
  User          User[]
  Booking       Booking[]
}

/// Highlights a positive aspect included in a tourist package (e.g., "Fast-track entry").
/// Ordered for display; optional icon.
model Benefit {
  id             Int            @id @default(autoincrement())
  /// FK to TouristPackage.id
  packageId      Int
  /// Optional icon URL (CDN / assets)
  /// Example: "https://cdn.example.com/icons/fast-track.svg"
  iconUrl        String?
  /// Short benefit title
  /// Example: "Fast-track Entry"
  title          String
  /// Optional longer explanatory text
  /// Example: "Skip standard queues at main checkpoints."
  text           String?
  /// Display order (lower appears first)
  order          Int?
  /// Creation timestamp
  createdAt      DateTime       @default(now())
  /// Relation to parent package
  TouristPackage TouristPackage @relation(fields: [packageId], references: [id])

  @@index([packageId])
}

/// Represents a worker (staff) linked to a tourism company.
/// Provides role and permission assignments.
model CompanyWorker {
  id             Int            @id @default(autoincrement())
  /// FK to User.id
  userId         String
  /// FK to TourismCompany.id
  companyId      Int
  /// Free-form role label (e.g., "Guide", "Sales")
  /// Example: "Senior Guide"
  role           String?
  /// Soft activation flag
  isActive       Boolean        @default(true)
  TourismCompany TourismCompany @relation(fields: [companyId], references: [id])
  User           User           @relation(fields: [userId], references: [id])
  /// Assigned granular permissions
  Permission     Permission[]   @relation("WorkerPermissions")

  @@unique([userId, companyId])
}

/// A concrete feature of the package (amenity or attribute), grouped optionally by category.
model Feature {
  id          Int      @id @default(autoincrement())
  /// FK to Activity.id
  activityId  Int
  /// Optional grouping category (e.g., "Comfort", "Safety")
  /// Example: "Safety"
  category    String?
  /// Icon URL for UI representation
  iconUrl     String?
  /// Feature name (concise)
  /// Example: "Life Jackets Included"
  name        String
  /// Optional detail description
  /// Example: "Certified jackets for all participants."
  description String?
  /// Display order
  order       Int?
  createdAt   DateTime @default(now())
  Activity    Activity @relation(fields: [activityId], references: [id])

  @@index([activityId])
}

/// High-level itinerary container (e.g., 3-day trek).
/// Core unit of an experience visited inside or across packages
/// Represents a concrete attraction or activity with its own schedule
model Activity {
  id                 Int                      @id @default(autoincrement())
  /// Activity name
  name               String
  /// Optional description
  description        String?
  /// Destination City FK
  destinationCityId  Int
  /// Timestamps
  createdAt          DateTime                 @default(now())
  updatedAt          DateTime                 @updatedAt
  /// Relations
  destinationCity    City                     @relation(fields: [destinationCityId], references: [id])
  Feature            Feature[]
  Schedule           Schedule[]
  TouristPackageLink TouristPackageActivity[]
}

model Media {
  id             Int            @id @default(autoincrement())
  /// FK to TouristPackage.id
  packageId      Int
  /// Asset type
  type           MediaType      @default(IMAGE)
  /// Public URL to resource
  /// Example: "https://cdn.example.com/media/package123/hero.jpg"
  url            String
  /// Optional caption / alt text
  /// Example: "Sunrise over Machu Picchu"
  caption        String?
  /// Display ordering
  order          Int?
  /// Marks the primary representative media
  isPrimary      Boolean        @default(false)
  createdAt      DateTime       @default(now())
  TouristPackage TouristPackage @relation(fields: [packageId], references: [id])

  @@index([packageId])
}

model PackageLanguage {
  packageId      Int
  languageId     Int
  Language       Language       @relation(fields: [languageId], references: [id])
  TouristPackage TouristPackage @relation(fields: [packageId], references: [id])

  @@id([packageId, languageId])
}

model Permission {
  id            Int             @id @default(autoincrement())
  /// Unique system permission name (e.g., "PACKAGE_EDIT")
  /// Example: "WORKER_ASSIGN"
  name          String          @unique
  CompanyWorker CompanyWorker[] @relation("WorkerPermissions")
}

model PickupDetail {
  id                     Int            @id @default(autoincrement())
  /// FK to TouristPackage.id
  packageId              Int
  /// Whether hotel pickup can be offered
  isHotelPickupAvailable Boolean        @default(false)
  /// Optional radius in km for pickup service
  /// Example: 5.0
  pickupRadiusKm         Float?
  /// Earliest pickup start time
  /// Example: "06:00"
  pickupStartTime        String?
  /// Latest pickup end time
  /// Example: "07:30"
  pickupEndTime          String?
  /// Additional instructions for guests
  /// Example: "Be ready in the lobby 10 minutes before pickup."
  instructions           String?
  TouristPackage         TouristPackage @relation(fields: [packageId], references: [id])

  @@index([packageId])
}

model PricingOption {
  id              Int            @id @default(autoincrement())
  /// FK to TouristPackage.id
  packageId       Int
  /// Label for the option ("Standard", "VIP")
  /// Example: "Early Bird"
  name            String
  /// Optional descriptive text
  /// Example: "Discount for bookings made in advance"
  description     String?
  /// FK to Currency.id
  currencyId      Int
  /// Monetary amount
  /// Example: 150.00
  amount          Decimal        @db.Decimal(12, 2)
  /// Whether amount applies per person
  perPerson       Boolean        @default(true)
  /// Minimum participants for validity
  minParticipants Int?
  /// Maximum participants allowed
  maxParticipants Int?
  /// Start date of validity
  /// Example: "2025-06-01T00:00:00.000Z"
  validFrom       DateTime?
  /// End date of validity
  /// Example: "2025-08-31T23:59:59.000Z"
  validTo         DateTime?
  /// Soft enable flag
  isActive        Boolean        @default(true)
  Currency        Currency       @relation(fields: [currencyId], references: [id])
  TouristPackage  TouristPackage @relation(fields: [packageId], references: [id])
  Booking         Booking[]

  @@index([currencyId])
  @@index([packageId])
}

model Schedule {
  id         Int         @id @default(autoincrement())
  /// FK to Activity.id
  activityId Int
  /// IANA timezone identifier (e.g., "America/Lima")
  /// Example: "America/Lima"
  timezone   String
  /// Days of week the schedule applies
  daysOfWeek DayOfWeek[]
  /// Local start time (HH:mm or flexible)
  /// Example: "09:00"
  startTime  String
  /// Local end time
  /// Example: "17:30"
  endTime    String?
  /// Optional notes (exceptions, seasonal info)
  /// Example: "Not available on national holidays."
  notes      String?
  Activity   Activity    @relation(fields: [activityId], references: [id])

  @@index([activityId])
}

/// Core product entity representing an experience/package offered.

/// Core product entity representing an experience/package offered.
/// Supports multilingual translations and structured attributes.
model TouristPackage {
  id                        Int                         @id @default(autoincrement())
  /// FK to TourismCompany.id (owner company)
  companyId                 Int
  /// Default (fallback) name
  name                      String
  /// Default description (can be overridden by translations)
  /// Example: "Guided tour through the Sacred Valley with lunch included."
  description               String?
  /// Duration expression (e.g., "3h", "2D1N")
  /// Example: "2D1N"
  duration                  String?
  /// Package type (group/private/self-guided)
  type                      PackageType                 @default(GROUP)
  /// Physical / skills difficulty
  difficulty                DifficultyLevel?
  /// Default language context
  languageId                Int?
  /// Average rating
  /// Example: 4.7
  rating                    Float?
  /// Active availability flag
  isActive                  Boolean                     @default(true)
  /// Minimum age requirement
  minAge                    Int?
  /// Maximum age allowed
  maxAge                    Int?
  /// Minimum participants required
  minParticipants           Int?
  /// Maximum participants allowed
  maxParticipants           Int?
  /// Meeting point text
  /// Example: "Plaza de Armas, Cusco"
  meetingPoint              String?
  /// Meeting latitude
  meetingLatitude           Float?
  /// Meeting longitude
  meetingLongitude          Float?
  /// Ending point text
  /// Example: "Hotel in Cusco"
  endPoint                  String?
  /// Ending latitude
  endLatitude               Float?
  /// Ending longitude
  endLongitude              Float?
  /// Operational timezone
  timezone                  String?
  /// Booking cutoff rule (e.g., "24h")
  /// Example: "12h"
  bookingCutoff             String?
  /// Array of requirement strings
  requirements              String[]
  /// Safety related information
  /// Example: "Wear comfortable shoes; altitude may affect breathing."
  safetyInfo                String?
  /// Additional miscellaneous info
  /// Example: "Optional upgrade to panoramic train."
  additionalInfo            String?
  /// Standard cancellation policy text
  /// Example: "Full refund if canceled 24h before start."
  cancellationPolicy        String?
  /// Items included
  /// Example: ["Guide", "Lunch", "Transport"]
  includedItems             String[]
  /// Items excluded
  /// Example: ["Entrance fees", "Personal expenses"]
  excludedItems             String[]
  /// Accessibility features supported
  /// Example: [WHEELCHAIR_ACCESSIBLE, AUDIO_GUIDE_AVAILABLE]
  accessibilityOptions      AccessibilityFeature[]
  /// Creation timestamp
  createdAt                 DateTime                    @default(now())
  /// Last update timestamp (manual)
  updatedAt                 DateTime
  Benefit                   Benefit[]
  Media                     Media[]
  PackageLanguage           PackageLanguage[]
  PickupDetail              PickupDetail[]
  PricingOption             PricingOption[]
  TourismCompany            TourismCompany              @relation(fields: [companyId], references: [id])
  Language                  Language?                   @relation(fields: [languageId], references: [id])
  TouristPackageTranslation TouristPackageTranslation[]
  // Single representative city for the package (e.g., for listing cards)
  representativeCityId      Int?
  representativeCity        City?                       @relation("RepresentativeCity", fields: [representativeCityId], references: [id])
  // Normalized many-to-many itinerary locations
  locations                 PackageLocation[]
  // Association to activities via join table
  activities                TouristPackageActivity[]
  Booking                   Booking[]

  @@index([companyId])
}

/// Language-specific overrides for textual package fields.
model TouristPackageTranslation {
  id                 Int            @id @default(autoincrement())
  /// FK to TouristPackage.id
  packageId          Int
  /// FK to Language.id
  languageId         Int
  /// Translated name (optional)
  name               String?
  /// Translated description
  /// Example: "Excursión guiada por el Valle Sagrado con almuerzo incluido."
  description        String?
  /// Translated meeting point text
  /// Example: "Plaza de Armas, Cusco"
  meetingPoint       String?
  /// Translated end point text
  /// Example: "Hotel en Cusco"
  endPoint           String?
  /// Translated cancellation policy text
  /// Example: "Reembolso completo si cancelas 24h antes del inicio."
  cancellationPolicy String?
  /// Translated requirement strings
  /// Example: ["Pasaporte válido", "Buen estado físico"]
  requirements       String[]
  /// Translated included item strings
  /// Example: ["Guía", "Almuerzo", "Transporte"]
  includedItems      String[]
  /// Translated excluded item strings
  /// Example: ["Entradas", "Gastos personales"]
  excludedItems      String[]
  Language           Language       @relation(fields: [languageId], references: [id])
  TouristPackage     TouristPackage @relation(fields: [packageId], references: [id])

  @@unique([packageId, languageId])
}

/// Normalized relation between a package and its itinerary cities (locations).
/// Allows:
/// - Associating multiple cities to a package in the order shown to the user.
/// - Keeping optional notes per city.
/// Notes:
/// - Composite primary key prevents duplicates (packageId, cityId).
/// - Use 'order' to control the visual itinerary stop order.
model PackageLocation {
  /// FK to TouristPackage.id
  packageId Int
  /// FK to City.id
  cityId    Int
  /// Display order (lower appears first)
  order     Int?
  /// Free-form notes for specific details
  notes     String?
  /// Creation timestamp
  createdAt DateTime @default(now())

  TouristPackage TouristPackage @relation(fields: [packageId], references: [id])
  City           City           @relation(fields: [cityId], references: [id])

  @@id([packageId, cityId])
  @@index([cityId])
  @@index([packageId])
}

/// Join table between TouristPackage and Activity (M:N)
model TouristPackageActivity {
  /// FK to TouristPackage.id
  packageId  Int
  /// FK to Activity.id
  activityId Int
  /// Start date of the activity within the context of this package
  startDate  DateTime
  /// End date of the activity within the context of this package
  endDate    DateTime
  /// Creation timestamp
  createdAt  DateTime @default(now())

  TouristPackage TouristPackage @relation(fields: [packageId], references: [id])
  Activity       Activity       @relation(fields: [activityId], references: [id])

  @@id([packageId, activityId])
  @@index([activityId])
  @@index([packageId])
}

enum Gender {
  /// Masculino
  MALE
  /// Femenino  
  FEMALE
  UNKN
}

enum AccessibilityFeature {
  WHEELCHAIR_ACCESSIBLE
  STROLLER_ACCESSIBLE
  SERVICE_ANIMALS_ALLOWED
  AUDIO_GUIDE_AVAILABLE
  SIGN_LANGUAGE_AVAILABLE
  LARGE_PRINT_MATERIAL
  ASSISTIVE_LISTENING_SYSTEM
  BRAILLE_MATERIAL
  STEP_FREE_ACCESS
  ELEVATOR_AVAILABLE
  ACCESSIBLE_TOILET
}

enum CancellationPolicyType {
  FLEXIBLE
  MODERATE
  STRICT
  NON_REFUNDABLE
}

enum DayOfWeek {
  MON
  TUE
  WED
  THU
  FRI
  SAT
  SUN
}

enum DifficultyLevel {
  EASY
  MODERATE
  CHALLENGING
  HARD
}

enum MediaType {
  IMAGE
  VIDEO
  DOCUMENT
}

enum PackageType {
  GROUP
  PRIVATE
  SELF_GUIDED
}

model Booking {
  id              String @id @default(cuid())
  userId          String
  packageId       Int
  pricingOptionId Int?

  // Payment details (Mercado Pago)
  paymentId     String?       @unique
  paymentStatus PaymentStatus @default(PENDING)

  // Financials
  currencyId           Int
  totalAmount          Decimal @db.Decimal(12, 2)
  commissionPercentage Decimal @default(5.00) @db.Decimal(5, 2)
  commissionAmount     Decimal @db.Decimal(12, 2)
  companyAmount        Decimal @db.Decimal(12, 2)

  // Booking details
  bookingDate          DateTime      @default(now())
  travelDate           DateTime
  numberOfParticipants Int
  status               BookingStatus @default(PENDING)

  // Relations
  User           User           @relation(fields: [userId], references: [id])
  TouristPackage TouristPackage @relation(fields: [packageId], references: [id])
  PricingOption  PricingOption? @relation(fields: [pricingOptionId], references: [id])
  Currency       Currency       @relation(fields: [currencyId], references: [id])

  @@index([userId])
  @@index([packageId])
}

enum PaymentStatus {
  PENDING
  APPROVED
  AUTHORIZED
  IN_PROCESS
  IN_MEDIATION
  REJECTED
  CANCELLED
  REFUNDED
  CHARGED_BACK
}

enum BookingStatus {
  PENDING
  CONFIRMED
  CANCELLED
  COMPLETED
}
